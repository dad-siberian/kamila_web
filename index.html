<!doctype html>
<html lang="ru">

<head>
    <!-- Обязательные метатеги -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Профиль</title>
    <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
</head>

<body>
    <section style="background-color: #eee;">
        <div class="container py-5 h-100">

            <div class="row d-flex justify-content-center  h-100">
                <div class="col-md-12 col-xl-4">
                    <div class="card mb-3" style="border-radius: 15px;">
                        <div class="card-body text-center">
                            <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp"
                                alt="avatar" class="rounded-circle img-fluid" style="width: 150px;">
                            <h5 class="my-3">Сибиряк</h5>
                            <div id="usercard"> <!--Карта профиля, человека, который к нам обратился-->
                            </div>
                            <p class="text-muted mb-4">Игрок</p>
                            <div class="d-flex justify-content-center mb-2">
                                <!-- <button type="button" class="btn btn-primary">Изменить</button>
                                <button type="button" class="btn btn-outline-primary ms-1">Пополнить баланс</button> -->
                            </div>
                        </div>
                    </div>
                    <div class="card mb-3" style="border-radius: 15px;">
                        <div class="card-header">
                            Рейтинг общий
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Позиция</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">2</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Баллов</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">1345</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Игр сыграно</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">78</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Частая карта</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">Доктор</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12">
                                    <p class="mb-0">Процент побед</p>
                                </div>
                                <div class="col-sm-12">
                                    <div class="progress" role="progressbar" aria-label="Example with label"
                                        aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
                                        <div class="progress-bar" style="width: 57%">57%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card mb-3" style="border-radius: 15px;">
                        <div class="card-header">
                            Рейтинг за месяц
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Позиция</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">7</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Баллов</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">241</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Игр сыграно</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">5</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Процент побед</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">60</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-7">
                                    <p class="mb-0">Частая карта</p>
                                </div>
                                <div class="col-sm-5">
                                    <p class="text-muted mb-0">Мирный житель</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        let tg = window.Telegram.WebApp; //получаем объект webapp телеграма 

        tg.expand(); //расширяем на все окно  

        tg.MainButton.text = "Changed Text"; //изменяем текст кнопки 
        tg.MainButton.setText("Changed Text1"); //изменяем текст кнопки иначе
        tg.MainButton.textColor = "#F55353"; //изменяем цвет текста кнопки
        tg.MainButton.color = "#143F6B"; //изменяем цвет бэкграунда кнопки
        tg.MainButton.setParams({ "color": "#143F6B" }); //так изменяются все параметры

        let btn = document.getElementById("btn"); //получаем кнопку скрыть/показать 

        btn.addEventListener('click', function () { //вешаем событие на нажатие html-кнопки
            if (tg.MainButton.isVisible) { //если кнопка показана 
                tg.MainButton.hide() //скрываем кнопку 
            }
            else { //иначе
                tg.MainButton.show() //показываем 
            }
        });

        let btnED = document.getElementById("btnED"); //получаем кнопку активировать/деактивировать
        btnED.addEventListener('click', function () { //вешаем событие на нажатие html-кнопки
            if (tg.MainButton.isActive) { //если кнопка показана 
                tg.MainButton.setParams({ "color": "#E0FFFF" }); //меняем цвет
                tg.MainButton.disable() //скрываем кнопку 
            }
            else { //иначе
                tg.MainButton.setParams({ "color": "#143F6B" }); //меняем цвет
                tg.MainButton.enable() //показываем 
            }
        });

        Telegram.WebApp.onEvent('mainButtonClicked', function () {
            tg.sendData("some string that we need to send");
            //при клике на основную кнопку отправляем данные в строковом виде
        });


        let usercard = document.getElementById("usercard"); //получаем блок usercard 

        let profName = document.createElement('p'); //создаем параграф
        profName.innerText = `${tg.initDataUnsafe.user.first_name}
            ${tg.initDataUnsafe.user.last_name}
            ${tg.initDataUnsafe.user.username} (${tg.initDataUnsafe.user.language_code})`;
        //выдем имя, "фамилию", через тире username и код языка
        usercard.appendChild(profName); //добавляем 

        let userid = document.createElement('p'); //создаем еще параграф 
        userid.innerText = `${tg.initDataUnsafe.user.id}`; //показываем user_id
        usercard.appendChild(userid); //добавляем


            //работает только в attachment menu
            // let pic = document.createElement('img'); //создаем img
            // pic.src = tg.initDataUnsafe.user.photo_url; //задаём src
            // usercard.appendChild(pic); //добавляем элемент в карточку 
    </script>

</body>

</html>